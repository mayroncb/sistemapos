<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui" xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

    <f:view contentType="text/html">
        <h:head>
            <f:facet name="first">
                <meta content='text/html; charset=UTF-8' http-equiv="Content-Type"/>
                <link type="text/css" rel="stylesheet" href="#{facesContext.externalContext.requestContextPath}/resources/css/interface.css" />
                <title>L3 Sistema</title>
                <script type="text/javascript">
                    function handleDrop(event, ui) {
                        var droppedComodo = ui.draggable;
                        droppedComodo.fadeOut('fast');
                    }
                </script>
            </f:facet>
        </h:head>

        <h:body>
            <h:form id="form" class="forms">
                <p:growl id="growl" sticky="true" showDetail="true"/>
                <p:wizard flowListener="#{cadastroMB.onFlowProcess}">
                    <p:tab id="pessoal" title="Cliente">
                        <p:panel header="Dados do Cliente" style="width: 100%">
                            <p:messages />
                            <fieldset>
                                <legend>Dados do Cliente</legend>
                                <table class="corpo">
                                    <tr class="linha">
                                        <td class="padraoColuna-200"></td>
                                        <td></td>
                                        <td class="padraoColuna-100"></td>
                                        <td></td>
                                    </tr>
                                    <tr class="linha">
                                        <td>
                                    <h:outputText  value="Nome " />
                                    </td>
                                    <td>
                                    <p:inputText id="nome" requiredMessage="Campo * Nome Obrigatorio" required="true" size="30" value="#{cadastroMB.cliente.nome}" />
                                    </td>
                                    </tr>
                                    <tr class="linha">
                                        <td>
                                    <h:outputText value="Email " />
                                    </td>
                                    <td>
                                    <p:inputText value="#{cadastroMB.cliente.email}" size="30"   label="Email"/>
                                    </td>
                                    </tr>
                                    <tr class="linha">
                                        <td>
                                    <h:outputText value="CPF/CNPJ " /></td>
                                    <td>
                                    <p:inputMask mask="999.999.999-99" value="#{cadastroMB.cliente.cpf}"   label="CPF" /></td>
                                    <td>
                                    <h:outputText value="Telefone" /></td>
                                    <td>
                                    <p:inputMask  mask="(99)9999-9999" size="10" value="#{cadastroMB.cliente.telefone}" label="Telefone"/>
                                    </td>
                                    </tr>
                                </table>

                                <p:separator/>
                                <legend>Endereco do Cliente</legend>
                                <p:separator/>
                                <table>
                                    <tr class="linha">
                                        <td class="padraoColuna-200"></td>
                                        <td></td>
                                        <td class="padraoColuna-100"></td>
                                        <td></td>
                                    </tr>
                                    <tr class="linha">
                                        <td>
                                    <h:outputLabel value="Rua"/></td>
                                    <td>
                                    <p:inputText value="#{cadastroMB.cliente.endereco.rua}" size="30" label="rua" />
                                    </td>
                                    </tr>
                                    <tr class="linha">
                                        <td>
                                    <h:outputLabel value="Bairro"/></td>
                                    <td>
                                    <p:inputText value="#{cadastroMB.cliente.endereco.bairro}" size="30" label="rua" />
                                    </td>
                                    <td>
                                    <h:outputText value="Numero "/>
                                    </td>
                                    <td><p:inputText size="8" value="#{cadastroMB.cliente.endereco.numero}" label="Numero" /></td>
                                    </tr>
                                    <tr class="linha">
                                        <td>
                                    <h:outputLabel value="Cidade "/></td>
                                    <td >
                                    <p:inputText value="#{cadastroMB.cliente.endereco.cidade}" size="30" label="Cidade" />
                                    </td>
                                    <td>
                                    <h:outputText value="Cep "/>
                                    </td>
                                    <td><p:inputMask mask="99.999-999" size="8" value="#{cadastroMB.cliente.endereco.cep}" label="Cep" /></td>
                                    </tr>
                                    <tr class="linha">
                                        <td>
                                    <h:outputLabel value="Estado"/></td>
                                    <td>
                                    <p:inputText value="#{cadastroMB.cliente.endereco.estado}" size="50" label="Estado" />
                                    </td>
                                    </tr>
                                </table>
                            </fieldset>

                        </p:panel>
                    </p:tab>

                    <p:tab id="obra" title="Obra">
                        <p:panel header="Projeto">
                            <fieldset>
                                <legend>Dados do Terreno</legend>
                                <table class="corpo">
                                    <tr class="linha">
                                        <td class="padraoColuna-200"></td>
                                        <td></td>
                                        <td class="padraoColuna-100"></td>
                                        <td></td>
                                    </tr>
                                    <tr class="linha">
                                        <td>
                                    <h:outputText  value="Frente " />
                                    </td>
                                    <td>
                                    <p:spinner id="spinnerFrente" size="3" value="#{cadastroMB.frente}"  min="0" />
                                    </td>
                                    <td>
                                    <h:outputText value="Lateral " />
                                    </td>
                                    <td>
                                    <p:spinner id="spinnerLateral" size="3" value="#{cadastroMB.lateral}"  min="0" />
                                    </td>
                                    <td>
                                    <h:outputText value="Pavimentos " /></td>
                                    <td>
                                    <p:spinner size="1"  min="0"  value="#{cadastroMB.pavimentos}" >
                                        <p:ajax update="spinnerLateral, spinnerFrente, resulField" process="@all" />
                                    </p:spinner>
                                    </td>
                                    <tr>
                                        <td>
                                    <h:outputText value="Total"/>
                                    </td>
                                    <td>
                                    <p:inputText value="#{cadastroMB.calcM2}" id="resulField" disabled="true" size="1" /> m2</td>
                                    </tr>
                                    </tr>
                                </table>
                            </fieldset>
                            <br/><p:separator/>
                            <tr class="linha">
                                <td>

                                    <h3 style="margin-top:0">Detalhes do Projeto</h3>
                            <h:panelGrid columns="2" style="margin-bottom:10px" cellpadding="5">
                                <p:outputLabel for="padrao" value="PadrÃ£o: " />
                                <p:selectOneRadio  immediate="true" id="padrao" value="#{cadastroMB.padraoProjeto}">
                                    <f:selectItem itemLabel="Basico" itemValue="Basico" />
                                    <f:selectItem itemLabel="Normal" itemValue="Normal" />
                                    <p:ajax process="@this"/>
                                    <p:ajax update="checkboxDT"/>
                                </p:selectOneRadio>
                            </h:panelGrid>
                            </td>
                            </tr>
                            <p:separator/>
                            <!-- Inicio Drag Drop Comodos -->
                            <p:dataTable id="checkboxDT" var="comodo" value="#{cadastroMB.comodos}"  selection="#{cadastroMB.comodosSelecionados}" rowKey="#{comodo.id}" style="margin-bottom:0">
                                <f:facet name="header">
                                    Comodos
                                </f:facet>
                                <p:column selectionMode="multiple" style="width:5%;text-align:center"/>
                                <p:column headerText="DescriÃ§Ã£o">
                                    <h:outputText value="#{comodo.descricao}" />
                                </p:column>
                                <p:column headerText="Year">
                                    <h:outputText value="#{comodo.padrao}" />
                                </p:column>
                                <f:facet name="footer">
                                    <p:commandButton actionListener="#{cadastroMB.calcularAreaTotalDoProjeto()}" process="checkboxDT"  icon="ui-icon-search"  value="Salvar" />
                                </f:facet>
                            </p:dataTable>
                            <!-- Fim Drag Drop Comodos -->
                            <p:separator/>
                            <tr class="linha">
                                <td>
                            <h:outputText value="Mesmo endereÃ§o do cliente? "/> 
                            <p:selectBooleanCheckbox valueChangeListener="#{cadastroMB.copiarEnderecoCliente()}" value="#{cadastroMB.copiarEndereco}">
                                <p:ajax process="@this"  update="ProjetoRua, projetoBairro, projetoNumero, projetoEstado, projetoCep, projetoCidade"  />
                            </p:selectBooleanCheckbox> </td>

                            </tr>
                            <p:separator/>

                            <fieldset>
                                <legend>Endereco da Obra</legend>
                                <table>

                                    <tr class="linha">
                                        <td class="padraoColuna-200"></td>
                                        <td></td>
                                        <td class="padraoColuna-100"></td>
                                        <td></td>
                                    </tr>

                                    <tr class="linha">
                                        <td>
                                    <h:outputLabel value="Rua"/></td>
                                    <td>
                                    <p:inputText id="ProjetoRua" value="#{cadastroMB.projeto.endereco.rua}" size="30" label="rua" />
                                    </td>
                                    </tr>
                                    <tr class="linha">
                                        <td>
                                    <h:outputLabel value="Bairro"/></td>
                                    <td>
                                    <p:inputText id="projetoBairro" value="#{cadastroMB.projeto.endereco.bairro}" size="30" label="rua" />
                                    </td>
                                    <td>
                                    <h:outputText value="Numero "/>
                                    </td>
                                    <td><p:inputText id="projetoNumero" size="8" value="#{cadastroMB.projeto.endereco.numero}" label="Numero" /></td>
                                    </tr>
                                    <tr class="linha">
                                        <td>
                                    <h:outputLabel value="Cidade "/></td>
                                    <td >
                                    <p:inputText id="projetoCidade" value="#{cadastroMB.projeto.endereco.cidade}" size="30" label="Cidade" />
                                    </td>
                                    <td>
                                    <h:outputText value="Cep "/>
                                    </td>
                                    <td><p:inputMask id="projetoCep" mask="99.999-999" size="8" value="#{cadastroMB.projeto.endereco.cep}" label="Cep" /></td>
                                    </tr>
                                    <tr class="linha">
                                        <td>
                                    <h:outputLabel value="Estado"/></td>
                                    <td>
                                    <p:inputText id="projetoEstado" value="#{cadastroMB.projeto.endereco.estado}" size="50" label="Estado" />
                                    </td>
                                    </tr>
                                </table>
                            </fieldset>
                        </p:panel>
                    </p:tab>
                    <p:tab id="servicos" title="ServiÃ§os" >
                        <p:panel header="SeleÃ§Ã£o de ServiÃ§os" style="width: 100%">
                            <h:panelGrid columns="2" style="margin-bottom:10px" cellpadding="5">
                                <p:outputLabel for="basic" value="Projetos" />
                                <p:selectManyCheckbox id="basic" >
                                    <f:selectItem itemLabel="Arquitetonico" itemValue="" />
                                    <f:selectItem itemLabel="Ambientacao" itemValue="" />
                                    <f:selectItem itemLabel="Eletrico" itemValue="" />
                                    <f:selectItem itemLabel="Estrutural" itemValue="" />
                                    <f:selectItem itemLabel="Hidraulico" itemValue="" />
                                </p:selectManyCheckbox>
                            </h:panelGrid>
                            <p:separator style="width: 100%"/>
                            <h:panelGrid columns="2" style="margin-bottom:10px" cellpadding="5">
                                <p:outputLabel for="serv" value="ServiÃ§os" />
                                <p:selectManyCheckbox id="serv" >
                                    <f:selectItem itemLabel="AvaliaÃ§Ã£o" itemValue="" />
                                    <f:selectItem itemLabel="OrÃ§amento" itemValue="" />
                                    <f:selectItem itemLabel="DocumentaÃ§Ã£o" itemValue="" />
                                    <f:selectItem itemLabel="Acompanhamento" itemValue="" />
                                    <f:selectItem itemLabel="Laudo" itemValue="" />
                                </p:selectManyCheckbox>
                            </h:panelGrid>
                            <p:separator style="width: 100%"/>
                            <h:panelGrid columns="2" style="margin-bottom:10px" cellpadding="4">
                                <p:outputLabel for="outros" value="Diversos" />
                                <p:selectManyCheckbox id="outros" >
                                    <f:selectItem itemLabel="RT" itemValue="" />
                                    <f:selectItem itemLabel="Consultoria" itemValue="" />
                                    <f:selectItem itemLabel="Caixa Economica" itemValue="" />
                                    <f:selectItem itemLabel="Banco de Brasil" itemValue="" />
                                </p:selectManyCheckbox>
                            </h:panelGrid>
                        </p:panel>
                        <p:commandButton actionListener="#{cadastroMB.viewConfirmationProject()}" icon="ui-icon-extlink" value="Confirmar Dados"  update="growl" process="@this"/>
                    </p:tab>
                </p:wizard>
            </h:form>
        </h:body>
    </f:view>
</html>

